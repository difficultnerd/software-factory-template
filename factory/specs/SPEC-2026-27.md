---
spec_id: SPEC-2026-27
title: Wordle Game with Statistics and Australian Spelling
status: draft
author: spec-agent
created: 2026-02-16
source_issue: "#27"
---

## Intent
I want a simple Wordle style game where I can play multiple games a day and it tracks my statistics (wins, losses, streak, distribution). Use Australian spelling.

## Summary
A single-user Wordle clone using Australian spelling where players can play unlimited games per day. The system tracks comprehensive statistics including wins, losses, current streak, distribution of guess counts, and game history.

## Functional Requirements

### FR-001: Daily Word Selection
**Given** a user starts a new game
**When** they request a new puzzle
**Then** the system selects a 5-letter Australian English word from the dictionary

### FR-002: Guess Validation
**Given** a user is playing a game
**When** they submit a 5-letter guess
**Then** the system validates it's a real word and provides colour-coded feedback (correct position/green, correct letter wrong position/yellow, not in word/grey)

### FR-003: Game Completion
**Given** a user is playing a game
**When** they either guess the word correctly or exhaust 6 attempts
**Then** the game ends and the result is recorded in their statistics

### FR-004: Unlimited Daily Games
**Given** a user has completed a game
**When** they request to start another game
**Then** they can immediately start a new game with a different word (no daily limit)

### FR-005: Statistics Tracking
**Given** a user completes games over time
**When** they view their statistics page
**Then** they see total games played, win percentage, current streak, max streak, and guess distribution (1-6 guesses plus failed)

### FR-006: Game History
**Given** a user has played multiple games
**When** they view their history
**Then** they see a chronological list of recent games with the word, result, and guess count

### FR-007: Australian Spelling Dictionary
**Given** the game uses Australian English
**When** selecting target words or validating guesses
**Then** the system uses Australian spelling variants (e.g., "colour" not "color", "centre" not "center")

### FR-008: Visual Game Board
**Given** a user is playing a game
**When** they make guesses
**Then** they see a 6x5 grid showing their current and previous guesses with appropriate colour coding

## API Contracts

```yaml
/api/games:
  post:
    summary: Start new game
    responses:
      201:
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  type: object
                  properties:
                    game_id: { type: string, format: uuid }
                    target_word_length: { type: integer, enum: [5] }
                    max_guesses: { type: integer, enum: [6] }
                    status: { type: string, enum: [in_progress] }
                    created_at: { type: string, format: date-time }

/api/games/{gameId}/guesses:
  post:
    summary: Submit guess
    requestBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              guess: { type: string, pattern: "^[A-Z]{5}$" }
    responses:
      200:
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  type: object
                  properties:
                    guess_number: { type: integer }
                    feedback: 
                      type: array
                      items:
                        type: object
                        properties:
                          letter: { type: string }
                          status: { type: string, enum: [correct, present, absent] }
                    game_status: { type: string, enum: [in_progress, won, lost] }
                    target_word: { type: string, nullable: true }

/api/games/{gameId}:
  get:
    summary: Get game state
    responses:
      200:
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  type: object
                  properties:
                    game_id: { type: string, format: uuid }
                    status: { type: string, enum: [in_progress, won, lost] }
                    guesses: 
                      type: array
                      items:
                        type: object
                        properties:
                          guess: { type: string }
                          feedback: { type: array }
                    target_word: { type: string, nullable: true }

/api/stats:
  get:
    summary: Get user statistics
    responses:
      200:
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  type: object
                  properties:
                    total_games: { type: integer }
                    games_won: { type: integer }
                    win_percentage: { type: number }
                    current_streak: { type: integer }
                    max_streak: { type: integer }
                    guess_distribution: 
                      type: object
                      properties:
                        "1": { type: integer }
                        "2": { type: integer }
                        "3": { type: integer }
                        "4": { type: integer }
                        "5": { type: integer }
                        "6": { type: integer }
                        failed: { type: integer }

/api/history:
  get:
    summary: Get game history
    parameters:
      - name: limit
        in: query
        schema: { type: integer, default: 50, maximum: 100 }
    responses:
      200:
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  type: array
                  items:
                    type: object
                    properties:
                      game_id: { type: string, format: uuid }
                      target_word: { type: string }
                      status: { type: string, enum: [won, lost] }
                      guesses_taken: { type: integer }
                      completed_at: { type: string, format: date-time }
```

## Data Models

### games table
- `id` (uuid, PK)
- `user_id` (uuid, FK to auth.users, not null) - **RLS: Users can only access their own games**
- `target_word` (varchar(5), not null)
- `status` (varchar(20), not null, CHECK IN ('in_progress', 'won', 'lost'))
- `guesses_taken` (integer, nullable, CHECK >= 0 AND <= 6)
- `created_at` (timestamptz, not null)
- `updated_at` (timestamptz, not null)
- `completed_at` (timestamptz, nullable)

### guesses table  
- `id` (uuid, PK)
- `game_id` (uuid, FK to games.id, not null)
- `user_id` (uuid, FK to auth.users, not null) - **RLS: Users can only access their own guesses**
- `guess_number` (integer, not null, CHECK >= 1 AND <= 6)
- `guess_word` (varchar(5), not null)
- `feedback` (jsonb, not null) - Array of {letter, status} objects
- `created_at` (timestamptz, not null)
- UNIQUE(game_id, guess_number)

### australian_words table
- `id` (uuid, PK)
- `word` (varchar(5), not null, UNIQUE)
- `is_target_word` (boolean, not null, default true)
- `created_at` (timestamptz, not null)
- INDEX on (word)
- INDEX on (is_target_word) WHERE is_target_word = true

### user_statistics table (materialized view updated via trigger)
- `user_id` (uuid, PK, FK to auth.users)
- `total_games` (integer, not null, default 0)
- `games_won` (integer, not null, default 0)
- `current_streak` (integer, not null, default 0)
- `max_streak` (integer, not null, default 0)
- `guess_distribution` (jsonb, not null, default '{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"failed":0}')
- `updated_at` (timestamptz, not null)
- **RLS: Users can only access their own statistics**

**PII Fields:** None identified. All data is game performance metrics.

## Security Requirements

**SR-001: Authentication Required (ASVS 4.1.1)**
- All game endpoints require valid Supabase JWT
- Enforcement: Authentication middleware in Cloudflare Workers

**SR-002: Data Isolation (ASVS 4.1.2, 4.1.5)**  
- Users can only access their own games, guesses, and statistics
- Enforcement: Supabase RLS policies on all user-scoped tables

**SR-003: Input Validation (ASVS 5.1.1, 5.1.3)**
- All guess submissions validated via Zod schema (5 letter A-Z pattern)
- Word existence validated against australian_words table
- Enforcement: Zod schemas at API boundaries

**SR-004: Game State Integrity (ASVS 13.2.1)**
- Game state transitions enforced at database level (in_progress -> won/lost only)
- Maximum 6 guesses per game enforced via CHECK constraints
- Enforcement: Database constraints and business logic validation

**SR-005: Rate Limiting (ASVS 11.1.4)**
- Reasonable limits on game creation and guess submission
- Enforcement: Cloudflare Workers rate limiting

## Non-Functional Requirements

**NFR-001: Response Time**
- Game state queries respond within 200ms
- New game creation completes within 500ms
- Guess validation completes within 300ms

**NFR-002: Free Tier Compliance**
- Cloudflare Workers execution under 10ms CPU per request
- Supabase database queries optimized for free tier limits
- Minimal storage footprint (estimated <100KB per active user)

**NFR-003: Dictionary Size**
- Target word dictionary: 2,000-3,000 common 5-letter Australian English words  
- Valid guess dictionary: 10,000+ 5-letter English words
- Pre-loaded in database for fast lookup

## Infrastructure Requirements

**New Infrastructure:**
- Scheduled job to refresh materialized view (user_statistics) - runs every 15 minutes
- One-time data migration to populate australian_words table from word list
- Database indexes on games(user_id, status) and guesses(game_id)

**Word List Source:**
- Australian Oxford Dictionary 5-letter words (requires sourcing/licensing consideration)
- Alternative: Curated list from open Australian English corpus

## Out of Scope

- Social features (sharing, leaderboards, multiplayer)
- Daily challenge mode with shared words
- Word difficulty ratings or categorization  
- Hints or help system
- Accessibility features beyond semantic HTML
- Mobile app (web-only)
- Multiple language support
- Custom word lists or user-generated content
- Integration with external dictionaries or APIs

## Open Questions

1. **Word List Sourcing:** What is the preferred source for the Australian English 5-letter word dictionary? Should we use an open corpus, purchase licensing, or manually curate?

2. **Target Word Selection Strategy:** Should target words be randomly selected from the full dictionary, or filtered for appropriate difficulty/common usage?

3. **Statistics Reset:** Should users have the ability to reset their statistics, or are they permanent?

4. **Game History Retention:** How long should completed games be retained in the database? (impacts storage costs)

5. **Case Handling:** Should the game accept lowercase input and convert to uppercase, or require uppercase entry?

## Decision Log
| Timestamp | Agent | Tier | Decision | Reasoning |
|-----------|-------|------|----------|-----------|
| 2026-02-16T10:30:00Z | spec-agent | 1 | Unlimited daily games | User requested "multiple games a day", interpreted as no daily limit for better user experience |
| 2026-02-16T10:30:00Z | spec-agent | 1 | Australian spelling dictionary | Explicitly requested in user requirements |
| 2026-02-16T10:30:00Z | spec-agent | 1 | Single-user application | Follows PATTERNS.md default for personal software |
| 2026-02-16T10:30:00Z | spec-agent | 2 | Materialized view for statistics | Performance optimization for free tier constraints, requires scheduled refresh |