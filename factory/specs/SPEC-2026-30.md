---
spec_id: SPEC-2026-30
title: Personal Boggle Word Game
status: draft
author: spec-agent
created: 2026-02-16
source_issue: "#30"
---

## Intent
I want a boggle game to run on iPhone on web. Dark mode. Make it simple just for me.

## Summary
A single-user web-based Boggle word game optimized for mobile Safari on iPhone with dark mode styling. The game will generate random letter grids, allow word finding through touch interaction, and track scoring locally.

## Functional Requirements

### FR-001: Generate Boggle Grid
**Given** the user starts a new game
**When** the game initializes
**Then** a 4x4 grid of random letters is displayed with standard Boggle letter distribution

### FR-002: Word Selection via Touch
**Given** a Boggle grid is displayed
**When** the user touches and drags across adjacent letters (horizontally, vertically, or diagonally)
**Then** the selected path is highlighted and the letters form a candidate word

### FR-003: Word Validation and Scoring
**Given** the user completes a word selection
**When** they lift their finger
**Then** the word is validated against a dictionary and scored (3+ letters: 1pt, 4 letters: 1pt, 5 letters: 2pts, 6 letters: 3pts, 7 letters: 5pts, 8+ letters: 11pts)

### FR-004: Found Words Display
**Given** valid words have been found
**When** viewing the game screen
**Then** all found words are displayed in a list with their scores and total score

### FR-005: Game Timer
**Given** a game is active
**When** 3 minutes elapse
**Then** word finding is disabled and final score is displayed

### FR-006: New Game
**Given** a game has ended or is in progress
**When** the user selects "New Game"
**Then** a fresh 4x4 grid is generated and timer resets to 3 minutes

### FR-007: Dark Mode Interface
**Given** the application loads
**When** rendering the UI
**Then** all interface elements use dark theme colors optimized for iPhone display

### FR-008: Mobile Touch Optimization
**Given** the user is on an iPhone
**When** interacting with the letter grid
**Then** touch targets are appropriately sized (minimum 44px) and touch feedback is provided

## API Contracts

### GET /api/words/validate
Validates if a word exists in the dictionary.

```yaml
parameters:
  - name: word
    in: query
    required: true
    schema:
      type: string
      minLength: 3
      maxLength: 16
      pattern: '^[A-Za-z]+$'
responses:
  200:
    description: Word validation result
    content:
      application/json:
        schema:
          type: object
          properties:
            data:
              type: object
              properties:
                word:
                  type: string
                valid:
                  type: boolean
                score:
                  type: integer
                  minimum: 0
            error:
              type: string
              nullable: true
  400:
    description: Invalid word format
```

### POST /api/dictionary/batch
Validates multiple words in a single request for efficient scoring.

```yaml
requestBody:
  required: true
  content:
    application/json:
      schema:
        type: object
        properties:
          words:
            type: array
            items:
              type: string
              pattern: '^[A-Za-z]+$'
            maxItems: 100
responses:
  200:
    description: Batch validation results
    content:
      application/json:
        schema:
          type: object
          properties:
            data:
              type: array
              items:
                type: object
                properties:
                  word:
                    type: string
                  valid:
                    type: boolean
                  score:
                    type: integer
```

## Data Models

### Game Session (Client-side only)
- `id`: string (UUID) - session identifier
- `grid`: string[][] - 4x4 array of letters
- `foundWords`: FoundWord[] - array of discovered words
- `startTime`: Date - game start timestamp
- `endTime`: Date | null - game end timestamp
- `totalScore`: number - sum of all word scores
- `timeRemaining`: number - seconds left in game

### Found Word (Client-side only)
- `word`: string - the discovered word
- `path`: GridPosition[] - sequence of grid positions
- `score`: number - points awarded for this word
- `timestamp`: Date - when word was found

### Grid Position (Client-side only)
- `row`: number (0-3) - grid row index
- `col`: number (0-3) - grid column index

### Word Dictionary Entry (Server-side)
- `id`: uuid (PK) - unique identifier
- `word`: text (not null, unique) - the dictionary word
- `length`: integer (not null) - word length for indexing
- `created_at`: timestamptz (not null) - record creation time

**Note: This is a single-user game with no persistent user data or PII.**

## Security Requirements

### SR-001: Input Validation (ASVS V5.1.1)
All word validation requests must be validated against Zod schemas to prevent injection attacks.
**Enforcement:** Zod validation middleware at API boundary

### SR-002: Rate Limiting (ASVS V11.1.1)
Word validation endpoints must be rate limited to prevent abuse.
**Enforcement:** Cloudflare Workers rate limiting (100 requests per minute per IP)

### SR-003: No User Authentication Required
Since this is a personal single-user game with no persistent data, no authentication is implemented.
**Enforcement:** N/A - game state stored in browser localStorage only

### SR-004: Secure Headers (ASVS V14.4.1)
All responses must include appropriate security headers for web application protection.
**Enforcement:** Security middleware sets CSP, HSTS, X-Content-Type-Options headers

## Non-Functional Requirements

### NF-001: Mobile Performance
Game must be responsive on iPhone Safari with smooth touch interactions and render within 100ms.

### NF-002: Offline Capability
Core game functionality should work offline after initial load (dictionary validation requires network).

### NF-003: Free Tier Constraints
- Cloudflare Workers: Word validation must complete within 10ms CPU time
- Supabase: Dictionary queries must be efficient with appropriate indexes
- No persistent user storage beyond dictionary data

### NF-004: Accessibility
Interface must be usable with iOS VoiceOver and meet WCAG 2.1 AA standards for color contrast in dark mode.

## Infrastructure Requirements

### Dictionary Data Storage
- Supabase table for English word dictionary (~50,000 common words)
- Index on word length for efficient validation
- Read-only access pattern (no user data modification)

### Static Asset Delivery
- Cloudflare Pages for game client assets
- Service worker for offline dictionary caching

## Out of Scope

- User accounts or authentication
- Multiplayer functionality
- High score persistence across devices
- Multiple dictionary languages
- Custom word lists
- Game statistics or analytics
- Social sharing features
- Multiple grid sizes beyond 4x4
- Alternative scoring systems

## Open Questions

1. Should the dictionary include proper nouns, or common nouns only?
2. What word list should be used as the authoritative dictionary (e.g., SOWPODS, TWL, common English)?
3. Should there be any visual animations for word selection feedback beyond highlighting?
4. Should found words be sorted alphabetically or by discovery time?

## Decision Log

| Timestamp | Agent | Tier | Decision | Reasoning |
|-----------|-------|------|----------|-----------|
| 2026-02-16 | spec-agent | 1 | Single-user game with no authentication | Per PATTERNS.md default and "simple just for me" requirement |
| 2026-02-16 | spec-agent | 1 | Client-side game state in localStorage | No persistent user data needed, fits free tier constraints |
| 2026-02-16 | spec-agent | 1 | Standard 4x4 Boggle grid | Classic Boggle format, well-understood rules |
| 2026-02-16 | spec-agent | 2 | 3-minute game timer | Standard Boggle game duration, balances engagement vs mobile attention span |